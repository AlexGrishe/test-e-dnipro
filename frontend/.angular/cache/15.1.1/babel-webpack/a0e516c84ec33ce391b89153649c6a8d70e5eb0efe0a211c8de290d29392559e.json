{"ast":null,"code":"import { filter, interval, map, scan, take } from \"rxjs\";\nimport { CreateWalletModalComponent } from \"../../components/create-wallet-modal/create-wallet-modal.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/progress-bar\";\nfunction MyWalletComponent_div_29_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 22);\n  }\n  if (rf & 2) {\n    const card_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"src\", card_r1.img, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", card_r1.name);\n  }\n}\nfunction MyWalletComponent_div_29_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const card_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Last Paid on \", card_r1.date, \"\");\n  }\n}\nfunction MyWalletComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16)(2, \"p\", 17);\n    i0.ɵɵtemplate(3, MyWalletComponent_div_29_img_3_Template, 1, 2, \"img\", 18);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, MyWalletComponent_div_29_span_5_Template, 2, 1, \"span\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 20)(7, \"p\")(8, \"span\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(17, \"mat-progress-bar\", 21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const card_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", card_r1.img);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(card_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", card_r1.date);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(10, 7, card_r1.collected, \"$\", \"symbol-narrow\", \"1.0\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" / \", i0.ɵɵpipeBind4(13, 12, card_r1.goal, \"$\", \"symbol-narrow\", \"1.0\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(16, 17, +card_r1.collected / +card_r1.goal * 100, \"1.2-2\"), \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"value\", +card_r1.collected / +card_r1.goal * 100);\n  }\n}\nexport class MyWalletComponent {\n  constructor(dataService, createWalletModal) {\n    this.dataService = dataService;\n    this.createWalletModal = createWalletModal;\n    this.dataSourceUser = []; //Подставить список из children\n    this.usedId = this.dataService.userId;\n    // this.user = this.dataService.user\n    // this.walletCards = this.dataService.walletCards\n  }\n\n  ngOnInit() {\n    this.dataService.getUser().subscribe(response => {\n      console.log(response);\n      return this.user = response[\"user\"];\n    });\n    this.dataService.getUserWallets().subscribe(response => {\n      console.log(response['wallets']);\n      return this.walletCards = response['wallets'];\n    });\n  }\n  getUnreadTransactions(data, filter_key) {\n    interval(200).pipe(take(data.length), filter(res => data[res].type === filter_key), map(res => data[res].type), scan((acc, res) => acc.concat(res), [])).subscribe(res => {\n      this.walletsCardsItems = res.length;\n    }, null);\n  }\n  openCreateNewWalletDialog() {\n    const dialog = this.createWalletModal.open(CreateWalletModalComponent, {\n      data: {\n        name: this.nameWallet,\n        goal: this.goalWallet\n      }\n    });\n    dialog.afterClosed().subscribe(result => {\n      console.log('The dialog was closed');\n      console.log(this.nameWallet, this.goalWallet);\n      console.log(result);\n      this.data = result;\n      if (this.data) {\n        this.data.user_id = 1;\n        this.data.name = result['name'];\n        this.data.collected = 0;\n        this.data.img = 'assets/images/repair-vehicle.png';\n      }\n      this.dataService.addUserWallet(this.data).subscribe(response => {\n        console.log(response);\n        this.walletCards.push(response['wallet']);\n      });\n      console.log(result);\n      console.log(this.walletCards);\n    });\n  }\n}\nMyWalletComponent.ɵfac = function MyWalletComponent_Factory(t) {\n  return new (t || MyWalletComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.MatDialog));\n};\nMyWalletComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MyWalletComponent,\n  selectors: [[\"app-my-wallet\"]],\n  decls: 35,\n  vars: 8,\n  consts: [[1, \"container\"], [1, \"header\"], [1, \"main\"], [1, \"information-and-action-block\"], [1, \"information-and-action-block__information-block\"], [1, \"information-block__user-name\"], [\"src\", \"assets/images/three-btn.png\", \"alt\", \"Setting\"], [1, \"information-block__balance\"], [1, \"information-and-action-block__action-block\"], [\"src\", \"assets/images/money-send-icon.png\", \"alt\", \"Send Payment\"], [\"src\", \"assets/images/money-reques-icon.png\", \"alt\", \"Request Payment\"], [1, \"wallet-cards\"], [\"class\", \"wallet-cards__card-block\", 4, \"ngFor\", \"ngForOf\"], [1, \"create-new-wallet-block\"], [3, \"click\"], [1, \"wallet-cards__card-block\"], [1, \"card-block-header\"], [1, \"card-block__logo\"], [3, \"src\", \"alt\", 4, \"ngIf\"], [\"class\", \"card-block__date\", 4, \"ngIf\"], [1, \"card-block-progress-bar\"], [\"mode\", \"determinate\", 3, \"value\"], [3, \"src\", \"alt\"], [1, \"card-block__date\"]],\n  template: function MyWalletComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n      i0.ɵɵtext(3, \"My Wallet\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"span\");\n      i0.ɵɵtext(5, \"Keep track your financial plan\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 2)(7, \"div\", 3)(8, \"div\", 4)(9, \"div\", 5)(10, \"p\")(11, \"span\");\n      i0.ɵɵtext(12, \"\\uD83D\\uDC4B\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\");\n      i0.ɵɵelement(15, \"img\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 7)(17, \"p\");\n      i0.ɵɵtext(18);\n      i0.ɵɵpipe(19, \"currency\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"div\", 8)(21, \"button\");\n      i0.ɵɵelement(22, \"img\", 9);\n      i0.ɵɵtext(23, \"Send a payment \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"hr\");\n      i0.ɵɵelementStart(25, \"button\");\n      i0.ɵɵelement(26, \"img\", 10);\n      i0.ɵɵtext(27, \"Request a payment \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(28, \"div\", 11);\n      i0.ɵɵtemplate(29, MyWalletComponent_div_29_Template, 18, 20, \"div\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 13)(31, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function MyWalletComponent_Template_button_click_31_listener() {\n        return ctx.openCreateNewWalletDialog();\n      });\n      i0.ɵɵelementStart(32, \"span\");\n      i0.ɵɵtext(33, \"+\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \" Crate New Wallet \");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵtextInterpolate1(\"Hi \", ctx.user.name, \"!\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(19, 3, ctx.user.balance, \"$\", \"symbol-narrow\", \"1.0\"));\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngForOf\", ctx.walletCards);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.MatProgressBar, i3.DecimalPipe, i3.CurrencyPipe],\n  styles: [\".container[_ngcontent-%COMP%]{padding:0 48px 82px}.header[_ngcontent-%COMP%]{padding:36px 0;gap:8px;display:flex;flex-direction:column}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#5b6776}.main[_ngcontent-%COMP%]{display:grid;grid-template-rows:160px auto 124px;row-gap:24px}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.5fr 1fr;column-gap:24px}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__information-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:16px 24px;gap:21px;border:1px solid #E2E8F0;box-shadow:0 1px 3px #1018281a,0 1px 2px #1018280f;border-radius:6px}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__information-block[_ngcontent-%COMP%]   .information-block__user-name[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;height:40px;align-items:center}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__information-block[_ngcontent-%COMP%]   .information-block__user-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:24px}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__information-block[_ngcontent-%COMP%]   .information-block__user-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:18px}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__information-block[_ngcontent-%COMP%]   .information-block__balance[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400;font-size:32px;line-height:40px;letter-spacing:-.024em;color:#344055}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__action-block[_ngcontent-%COMP%]{display:flex;border:1px solid #E2E8F0;box-shadow:0 1px 3px #1018281a,0 1px 2px #1018280f;border-radius:6px;justify-content:space-around}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__action-block[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top:none;border-bottom:none;border-left:1px solid #E2E8F0;border-right:none;margin:0}.main[_ngcontent-%COMP%]   .information-and-action-block[_ngcontent-%COMP%]   .information-and-action-block__action-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;width:100%;font-weight:600;font-size:14px;line-height:20px;text-align:center;color:#344055}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:24px;gap:18px;border:1px solid #E2E8F0;box-shadow:0 1px 3px #1018281a,0 1px 2px #1018280f;border-radius:6px}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:8px;height:58px}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-header[_ngcontent-%COMP%]   .card-block__logo[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:24px;display:flex;align-items:center;letter-spacing:-.02em;color:#344055;gap:12px}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-header[_ngcontent-%COMP%]   .card-block__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow-clip-margin:inherit;background:#EFF2F6;border-radius:1000px;padding:10px}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-header[_ngcontent-%COMP%]   .card-block__date[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#79808a}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-progress-bar[_ngcontent-%COMP%]{width:100%}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-progress-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){font-weight:400;font-size:18px;line-height:24px;letter-spacing:-.02em;color:#4f46e5}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-progress-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-weight:300;font-size:13px;line-height:24px;letter-spacing:-.02em;color:#b0b1b8}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-progress-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){font-weight:400;font-size:14px;line-height:20px;color:#5b6776;display:flex;flex-direction:row-reverse;margin-top:-22px;margin-bottom:4px}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-progress-bar[_ngcontent-%COMP%]   .mat-mdc-progress-bar[_ngcontent-%COMP%]{display:block;height:10px;border-radius:50px}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-progress-bar[_ngcontent-%COMP%]   .mat-mdc-progress-bar[_ngcontent-%COMP%]     .mdc-linear-progress__buffer-bar{background:#F7F8FD}.main[_ngcontent-%COMP%]   .wallet-cards[_ngcontent-%COMP%]   .wallet-cards__card-block[_ngcontent-%COMP%]   .card-block-progress-bar[_ngcontent-%COMP%]   .mat-mdc-progress-bar[_ngcontent-%COMP%]     .mdc-linear-progress__bar-inner{border-top:10px solid #4F46E5}.main[_ngcontent-%COMP%]   .create-new-wallet-block[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#F7F8FD;border:1px solid #E2E8F0;box-shadow:0 1px 2px #1018280d;border-radius:6px}.main[_ngcontent-%COMP%]   .create-new-wallet-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;color:#4f46e5;gap:14px;font-weight:600;font-size:18px;line-height:24px;letter-spacing:-.02em;width:100%;height:100%}.main[_ngcontent-%COMP%]   .create-new-wallet-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;background:#4F46E5;border-radius:50px;text-align:center;width:32px;height:32px;color:#f7f8fd;font-size:14px;align-items:center;font-weight:400}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}